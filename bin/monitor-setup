#!/bin/bash

layout="${1}"

if [ "${layout}" == "manual" ]; then
  arandr
  exit 0
fi

if [ "${layout}" == "auto" ]; then
  monitors=$( xrandr )
  layout=laptop

  if ( echo $monitors | grep "DP-1-1 connected" &>/dev/null ); then
    echo $monitors
    layout=home
  fi
fi

autorandr --load "${layout}"

(
# After monitor setup, polybar must be reloaded
~/.dotfiles/wm/bin/polybar-launcher

# And wallpaper should be reloaded to fit
~/.dotfiles/wm/bin/change-background load
) &>/dev/null </dev/null &
